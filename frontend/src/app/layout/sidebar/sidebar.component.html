<nav class="h-full overflow-y-auto">
  <div class="p-2 space-y-0.5">
    @if (menuItems().length === 0) {
      <div class="p-3 text-center text-text-secondary-light dark:text-text-secondary-dark text-xs">
        <p>No menu items available</p>
      </div>
    } @else {
      @for (item of menuItems(); track item.id) {
        @if (hasChildren(item)) {
          <!-- Parent Item with Children -->
          <div class="space-y-0.5">
            <button
              type="button"
              class="w-full flex items-center gap-2.5 px-3 py-2 rounded-lg text-left transition-all duration-200 hover:bg-border-light dark:hover:bg-border-dark active:scale-[0.98]"
              (click)="toggleExpanded(item.id)"
              [attr.aria-expanded]="isExpanded(item.id)"
              [attr.aria-label]="item.label">
              <lucide-icon 
                [name]="getIcon(item.icon)" 
                size="18" 
                class="text-text-secondary-light dark:text-text-secondary-dark flex-shrink-0"
                [class.invisible]="!hasIcon(item.icon)">
              </lucide-icon>
              <span class="flex-1 text-sm font-medium text-text-primary-light dark:text-text-primary-dark truncate">{{ item.label }}</span>
              <lucide-icon 
                [name]="isExpanded(item.id) ? chevronDownIcon : chevronRightIcon" 
                size="14" 
                class="text-text-secondary-light dark:text-text-secondary-dark transition-transform duration-200 flex-shrink-0">
              </lucide-icon>
            </button>
            
            <!-- Children Items -->
            @if (isExpanded(item.id)) {
              <div class="ml-3 space-y-0.5 border-l border-border-light dark:border-border-dark pl-3">
                @for (child of item.children; track child.id) {
                  <button
                    type="button"
                    (click)="navigateTo(child.route)"
                    [ngClass]="{
                      'w-full flex items-center gap-2 px-2.5 py-1.5 rounded-lg text-xs transition-all duration-200 hover:bg-border-light dark:hover:bg-border-dark active:scale-[0.98] text-left': true,
                      'bg-primary/10 dark:bg-primary/20 text-primary': isActive(child.route)
                    }">
                    <lucide-icon 
                      [name]="getIcon(child.icon)" 
                      size="14" 
                      class="flex-shrink-0"
                      [class.invisible]="!hasIcon(child.icon)">
                    </lucide-icon>
                    <span class="font-medium truncate">{{ child.label }}</span>
                  </button>
                }
              </div>
            }
          </div>
        } @else {
          <!-- Single Item without Children -->
          <button
            type="button"
            (click)="navigateTo(item.route)"
            [ngClass]="{
              'w-full flex items-center gap-2.5 px-3 py-2 rounded-lg transition-all duration-200 hover:bg-border-light dark:hover:bg-border-dark active:scale-[0.98] text-left': true,
              'bg-primary/10 dark:bg-primary/20': isActive(item.route)
            }">
            <lucide-icon 
              [name]="getIcon(item.icon)" 
              size="18" 
              [ngClass]="{
                'text-text-secondary-light dark:text-text-secondary-dark flex-shrink-0': true,
                'text-primary': isActive(item.route),
                'invisible': !hasIcon(item.icon)
              }">
            </lucide-icon>
            <span 
              [ngClass]="{
                'text-sm font-medium text-text-primary-light dark:text-text-primary-dark truncate': true,
                'text-primary': isActive(item.route)
              }">
              {{ item.label }}
            </span>
          </button>
        }
      }
    }
  </div>
</nav>
